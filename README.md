# Connect 4 Game

This is a Connect 4 game implemented in C++.

## 📝 نمای کلی پروژه (Project Overview)

این پروژه یک پیاده‌سازی از بازی کلاسیک **Connect 4** با استفاده از زبان `C++` و کتابخانه گرافیکی `SFML` است. هدف اصلی این پروژه ارائه یک تجربه کامل از بازی با رابط کاربری گرافیکی (`GUI`)، دو حالت مختلف بازی و یک حریف هوش مصنوعی چالش‌برانگیز است.

### ✨ ویژگی‌های اصلی (Main Features)

- **رابط کاربری گرافیکی (`GUI`):** بازی دارای یک رابط کاربری کامل شامل منوی اصلی، صفحه تنظیمات بازیکنان، صفحه بازی و نمایش امتیازات است.
- **دو حالت بازی (Two Game Modes):**
  1.  **بازیکن در مقابل بازیکن (Player vs. Player):** دو بازیکن می‌توانند به صورت محلی با یکدیگر رقابت کنند.
  2.  **بازیکن در مقابل کامپیوتر (Player vs. Computer):** یک بازیکن می‌تواند در برابر یک هوش مصنوعی بازی کند.
- **هوش مصنوعی (AI Opponent):** حریف کامپیوتری از الگوریتم `Minimax` همراه با بهینه‌سازی `Alpha-Beta Pruning` برای تصمیم‌گیری و انتخاب بهترین حرکت استفاده می‌کند.

## ⚙️ ساختار پروژه و جزئیات کد (Project Structure & Code Details)

### 📁 ساختار فایل‌ها (File Structure)

- **`connect4.cpp`:** فایل اصلی کد منبع به زبان `C++` که تمام منطق بازی، رابط کاربری و هوش مصنوعی در آن پیاده‌سازی شده است.
- **`connect4.exe`:** فایل اجرایی کامپایل‌شده‌ی بازی برای سیستم‌عامل ویندوز.
- **`ARIAL.TTF`:** فایل فونت `TrueType` که برای نمایش متون در بازی استفاده می‌شود.

### 🏛️ معماری کد (Code Architecture)

کد به صورت شیءگرا و در قالب چندین کلاس اصلی طراحی شده است:

- **کلاس `Player`:** این کلاس اطلاعات مربوط به هر بازیکن را ذخیره می‌کند، از جمله:
  - `name`: نام بازیکن.
  - `id`: شناسه بازیکن (به عنوان مثال 'X' یا 'O').
  - `score`: امتیاز بازیکن.
  - `color`: رنگ مهره‌های بازیکن.
  - `computerFlag`: یک پرچم برای تشخیص اینکه آیا بازیکن کامپیوتر است یا انسان.

- **کلاس `GameBoard`:** این کلاس مسئول مدیریت صفحه بازی است:
  - `board[ROWS][COLS]`: یک آرایه دو بعدی برای نگهداری وضعیت فعلی صفحه بازی.
  - `reset()`: برای شروع مجدد و پاک کردن صفحه.
  - `isValidMove(col)`: بررسی می‌کند که آیا یک حرکت در ستون مشخص شده معتبر است یا خیر.
  - `makeMove(col, playerId)`: یک مهره از بازیکن مشخص شده را در ستون مورد نظر قرار می‌دهد.
  - `isFull()`: بررسی می‌کند که آیا صفحه بازی پر شده است.
  - `countFours(playerId)`: **نکته مهم:** این تابع تعداد کل ردیف‌های چهارتایی (افقی، عمودی و مورب) که توسط یک بازیکن تشکیل شده را می‌شمارد. در این پیاده‌سازی، برنده بر اساس بازیکنی که بیشترین تعداد "چهار" را داشته باشد مشخص می‌شود، نه اولین کسی که یک ردیف چهار تایی بسازد.

- **کلاس `ConnectFourGame`:** این کلاس اصلی برنامه است که تمام بخش‌ها را به هم متصل می‌کند:
  - مدیریت حلقه اصلی بازی (Game Loop).
  - پردازش ورودی‌های کاربر (موس و کیبورد).
  - رندر کردن تمام عناصر گرافیکی (صفحه بازی، منوها، متون).
  - مدیریت وضعیت بازی (منوی اصلی، تنظیم بازیکن، در حال بازی، پایان بازی).
  - پیاده‌سازی هوش مصنوعی.

### 🧠 منطق هوش مصنوعی (AI Logic)

هوش مصنوعی در تابع `findBestMove()` پیاده‌سازی شده و از یک استراتژی چند لایه استفاده می‌کند:

1.  **حرکت برنده فوری:** ابتدا بررسی می‌کند که آیا می‌تواند با یک حرکت بازی را ببرد.
2.  **مسدود کردن حریف:** اگر حرکت برنده فوری وجود نداشته باشد، بررسی می‌کند که آیا حریف در نوبت بعدی خود می‌تواند برنده شود و در این صورت حرکت او را مسدود می‌کند.
3.  **الگوریتم `Minimax`:** اگر هیچ‌کدام از موارد بالا برقرار نباشد، از الگوریتم `Minimax` با هرس آلفا-بتا برای پیدا کردن بهترین حرکت ممکن استفاده می‌کند. این الگوریتم درخت بازی را تا عمق مشخصی (`MAX_DEPTH`) جستجو کرده و حرکتی را انتخاب می‌کند که در بلندمدت بیشترین امتیاز را برای کامپیوتر به همراه داشته باشد.
4.  **حرکت تصادفی:** به عنوان آخرین راه حل، اگر هیچ حرکت بهینه‌ای یافت نشود، یک حرکت معتبر تصادفی انجام می‌دهد.

## 🚀 نحوه کامپایل و اجرا (How to Compile & Run)

برای کامپایل و اجرای این پروژه از سورس کد، باید پیش‌نیازهای زیر را نصب داشته باشید و مراحل زیر را دنبال کنید.

### 📋 پیش‌نیازها (Prerequisites)

- **کامپایلر `C++`:** شما به یک کامپایلر `C++` مانند `g++` (بخشی از مجموعه `GCC`) نیاز دارید.
- **کتابخانه `SFML`:** این پروژه از کتابخانه `SFML` برای گرافیک استفاده می‌کند. شما باید آن را دانلود کرده و روی سیستم خود نصب کنید.
  - می‌توانید `SFML` را از [وب‌سایت رسمی SFML](https://www.sfml-dev.org/download.php) دانلود کنید.

### 🛠️ کامپایل (Compilation)

1.  ترمینال یا `Command Prompt` را در پوشه اصلی پروژه باز کنید.
2.  دستور زیر را برای کامپایل کد وارد کنید. این دستور فایل `connect4.cpp` را کامپایل کرده و آن را با کتابخانه‌های مورد نیاز `SFML` لینک می‌کند:

    ```bash
    g++ -o connect4 connect4.cpp -lsfml-graphics -lsfml-window -lsfml-system
    ```

    **نکته:** اگر `SFML` را در یک مسیر غیر استاندارد نصب کرده‌اید، ممکن است نیاز به افزودن فلگ‌های `-I` (برای هدرها) و `-L` (برای کتابخانه‌ها) به دستور بالا داشته باشید.

### ▶️ اجرا (Execution)

پس از کامپایل موفقیت‌آمیز، یک فایل اجرایی به نام `connect4` (در لینوکس/macOS) یا `connect4.exe` (در ویندوز) ایجاد می‌شود. برای اجرای بازی، کافی است دستور زیر را در ترمینال وارد کنید:

- در ویندوز:
  ```bash
  .\\connect4.exe
  ```
- در لینوکس یا macOS:
  ```bash
  ./connect4
  ```

**مهم:** اطمینان حاصل کنید که فایل فونت `ARIAL.TTF` در کنار فایل اجرایی قرار دارد، در غیر این صورت برنامه با خطا مواجه خواهد شد.

## 💡 نقاط ضعف و پیشنهادات برای بهبود (Weaknesses & Suggestions for Improvement)

این پروژه یک پایه محکم برای بازی Connect 4 است، اما دارای نقاط ضعفی است که می‌توان آن‌ها را بهبود بخشید:

### ۱. ساختار کد (Code Structure)

- **نقطه ضعف:** تمام کد پروژه در یک فایل بزرگ (`connect4.cpp`) قرار دارد. این کار مدیریت، خوانایی و توسعه آینده کد را دشوار می‌کند.
- **پیشنهاد:** کد را به چندین فایل جداگانه تقسیم کنید:
  - `main.cpp`: برای نقطه ورود برنامه و ایجاد شیء `ConnectFourGame`.
  - `Player.h` و `Player.cpp`: برای تعریف و پیاده‌سازی کلاس `Player`.
  - `GameBoard.h` و `GameBoard.cpp`: برای کلاس `GameBoard`.
  - `ConnectFourGame.h` و `ConnectFourGame.cpp`: برای کلاس اصلی بازی.
  - `Constants.h`: برای تعریف ثوابت مانند رنگ‌ها و ابعاد صفحه.

### ۲. منطق بازی و قوانین (Game Logic & Rules)

- **نقطه ضعف:** قانون پیروزی در این بازی با نسخه استاندارد `Connect 4` متفاوت است. در اینجا، برنده بر اساس "تعداد کل ردیف‌های چهارتایی" تعیین می‌شود، در حالی که در بازی اصلی، "اولین بازیکنی که یک ردیف چهارتایی بسازد" برنده است. این موضوع می‌تواند برای بازیکنان گیج‌کننده باشد.
- **پیشنهاد:**
  - **پیاده‌سازی قانون استاندارد:** منطق بازی را تغییر دهید تا به محض اینکه یک بازیکن یک ردیف چهارتایی ساخت، بازی به پایان برسد و او برنده اعلام شود.
  - **ارائه به عنوان یک حالت جایگزین:** می‌توانید قانون فعلی را به عنوان یک حالت بازی امتیازی (`Scoring Mode`) در کنار حالت کلاسیک نگه دارید.

### ۳. هوش مصنوعی (Artificial Intelligence)

- **نقطه ضعف:** تابع ارزیابی (`evaluateBoard`) در الگوریتم `Minimax` نسبتاً ساده است و فقط ردیف‌های دوتایی و سه‌تایی را با وزن ثابت می‌شمارد.
- **پیشنهاد:**
  - **تابع ارزیابی پیچیده‌تر:** تابع ارزیابی را بهبود دهید تا به موقعیت‌های استراتژیک (مانند کنترل مرکز صفحه) و تهدیدهای آینده امتیاز بیشتری بدهد.
  - **عمق جستجوی پویا:** عمق جستجوی الگوریتم (`MAX_DEPTH`) ثابت است. می‌توان آن را به صورت پویا و بر اساس وضعیت بازی (مثلاً در اواخر بازی عمق جستجو را افزایش داد) تنظیم کرد.

### ۴. تجربه کاربری (User Experience - `UX`)

- **نقطه ضعف:** رابط کاربری عملکردی است اما فاقد جذابیت‌های بصری مدرن است. به عنوان مثال، مهره‌ها به صورت آنی در جای خود ظاهر می‌شوند.
- **پیشنهاد:**
  - **افزودن انیمیشن:** یک انیمیشن ساده برای افتادن مهره‌ها به داخل ستون‌ها اضافه کنید.
  - **بازخورد بصری بهتر:** هنگام برنده شدن یا در نوبت بازیکن، از افکت‌های بصری یا صوتی برای جلب توجه کاربر استفاده کنید.

### ۵. فرآیند ساخت (Build Process)

- **نقطه ضعف:** کامپایل پروژه به یک دستور طولانی در ترمینال وابسته است که مستعد خطا است.
- **پیشنهاد:** یک `Makefile` یا یک اسکریپت `CMakeLists.txt` به پروژه اضافه کنید. این کار فرآیند کامپایل را خودکار کرده و آن را برای دیگران آسان‌تر و قابل اعتمادتر می‌کند.

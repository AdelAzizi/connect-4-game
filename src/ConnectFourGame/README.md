# ูุณุชูุฏุงุช ฺฉูุงุณ `ConnectFourGame`

ุงู ูุณุชูุฏ ุจู ุชุดุฑุญ ฺฉุงูู ฺฉูุงุณ `ConnectFourGame`ุ ฺฉู ุจู ุนููุงู ฺฉูุงุณ ุงุตู ู ููุงููฺฏโฺฉููุฏู ฺฉู ุจุงุฒ ุนูู ูโฺฉูุฏุ ูโูพุฑุฏุงุฒุฏ.

## ๐ ููุง ฺฉู

ฺฉูุงุณ `ConnectFourGame` ูุบุฒ ูุชูฺฉุฑ ุจุฑูุงูู ุงุณุช. ุงู ฺฉูุงุณ ูุณุฆููุชโูุง ุฒุฑ ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏ:
-   ุงุฌุงุฏ ู ูุฏุฑุช ูพูุฌุฑู ุงุตู ุจุงุฒ.
-   ุงุฌุฑุง ุญููู ุงุตู ุจุงุฒ (Game Loop) ฺฉู ุดุงูู ูพุฑุฏุงุฒุด ุฑูุฏุงุฏูุงุ ุจูโุฑูุฒุฑุณุงู ููุทู ู ุฑูุฏุฑ ฺฉุฑุฏู ฺฏุฑุงูฺฉ ุงุณุช.
-   ูุฏุฑุช ูุถุนุช ฺฉู ุจุงุฒ (ูุงููุฏ ููู ุงุตูุ ุชูุธูุงุช ุจุงุฒฺฉูุ ุญู ุจุงุฒ ู ูพุงุงู ุจุงุฒ).
-   ูฺฏูุฏุงุฑ ูููููโูุง ุงุฒ ฺฉูุงุณโูุง `GameBoard` ู `Player`.
-   ูพุงุฏูโุณุงุฒ ููุทู ููุด ูุตููุน ุจุฑุง ุญุฑู ฺฉุงููพูุชุฑ.

## ๐ ุณุงุฎุชุงุฑ ูุงู

ุงู ฺฉูุงุณ ุฏุฑ ุฏู ูุงู ุฒุฑ ุณุงุฒูุงูุฏู ุดุฏู ุงุณุช:

-   `ConnectFourGame.h`: **ูุงู ูุฏุฑ** ฺฉู ุณุงุฎุชุงุฑ ู ุฑุงุจุท ุนููู ฺฉูุงุณ ุฑุง ุชุนุฑู ูโฺฉูุฏ.
-   `ConnectFourGame.cpp`: **ูุงู ูพุงุฏูโุณุงุฒ** ฺฉู ุชูุงู ููุทู ู ุฌุฒุฆุงุช ูุชุฏูุง ฺฉูุงุณ ุฑุง ุฏุฑ ุจุฑ ูโฺฏุฑุฏ.

---

## ๐ ุชุญูู ูุงู ูุฏุฑ (`ConnectFourGame.h`)

ูุงู ูุฏุฑ `ConnectFourGame.h` ููุดู ฺฉู ฺฉูุงุณ ุฑุง ุงุฑุงุฆู ูโุฏูุฏ ู ุชูุงู ูุชุบุฑูุง ู ุชูุงุจุน ุนุถู ุขู ุฑุง ุงุนูุงู ูโฺฉูุฏ.

```cpp
#pragma once

#include <SFML/Graphics.hpp>
#include <vector>
#include <string>
#include <utility> // For std::pair

#include "../Constants.h"
#include "../Player/Player.h"
#include "../GameBoard/GameBoard.h"

class ConnectFourGame {
public:
    ConnectFourGame();
    void run();

private:
    // --- Member Variables ---
    // ... (All member variables listed here) ...

    // --- Private Methods ---
    // ... (All private methods listed here) ...
};
```

### ูุชุบุฑูุง ุนุถู ฺฉูุฏ (`private` members):

-   **ุนูุงุตุฑ ุงุตู ฺฏุฑุงูฺฉ**:
    -   `sf::RenderWindow window`: ูพูุฌุฑู ุงุตู ุจุฑูุงูู ฺฉู ุชูุงู ูุญุชูุง ุฑู ุขู ุฑูุฏุฑ ูโุดูุฏ.
    -   `sf::Font font`: ูููุช ุงุณุชูุงุฏูโุดุฏู ุจุฑุง ุชูุงู ูุชูู ุฏุฑ ุจุงุฒ.
-   **ุนูุงุตุฑ ููุทู ู ูุถุนุช ุจุงุฒ**:
    -   `GameBoard board`: ูููููโุง ุงุฒ ฺฉูุงุณ `GameBoard` ฺฉู ูุถุนุช ูุนู ุตูุญู ุจุงุฒ ุฑุง ูฺฏูุฏุงุฑ ูโฺฉูุฏ.
    -   `std::vector<Player> players`: ฺฉ ูฺฉุชูุฑ ุจุฑุง ุฐุฎุฑู ุงุดุงุก ุฏู ุจุงุฒฺฉู.
    -   `Player* currentPlayer`: ฺฉ ุงุดุงุฑูโฺฏุฑ ฺฉู ุจู ุจุงุฒฺฉู ฺฉู ููุจุช ุญุฑฺฉุช ุงูุณุชุ ุงุดุงุฑู ูโฺฉูุฏ.
    -   `GameState gameState`: ฺฉ ูุชุบุฑ ุงุฒ ููุน `enum` ฺฉู ูุถุนุช ูุนู ุจุงุฒ ุฑุง ูุดุฎุต ูโฺฉูุฏ (ูุซูุงู `MAIN_MENU`, `PLAYING`).

### ูุชุฏูุง ฺฉูุฏ (`private` methods):

-   **ุญููู ุงุตู ุจุงุฒ**:
    -   `run()`: ูุชุฏ ุนููู ฺฉู ุญููู ุงุตู ุจุงุฒ ุฑุง ุชุง ุฒูุงู ฺฉู ูพูุฌุฑู ุจุงุฒ ุงุณุชุ ุงุฌุฑุง ูโฺฉูุฏ.
    -   `handleEvents()`: ุฑูุฏุงุฏูุง ฺฉุงุฑุจุฑ (ูุงููุฏ ฺฉูฺฉ ููุณ ุง ูุดุฑุฏู ฺฉูุฏ) ุฑุง ูพุฑุฏุงุฒุด ูโฺฉูุฏ.
    -   `update()`: ููุทู ุจุงุฒ ุฑุง ุจูโุฑูุฒุฑุณุงู ูโฺฉูุฏ (ูุซูุงู ุญุฑฺฉุช ููุด ูุตููุน).
    -   `render()`: ุชูุงู ุนูุงุตุฑ ฺฏุฑุงูฺฉ ุฑุง ุจุฑ ุงุณุงุณ ูุถุนุช ูุนู ุจุงุฒ ุฑู ุตูุญู ุชุฑุณู ูโฺฉูุฏ.
-   **ูุฏุฑุช ููุด ูุตููุน**:
    -   `findBestMove()`: ุจูุชุฑู ุญุฑฺฉุช ููฺฉู ุจุฑุง ฺฉุงููพูุชุฑ ุฑุง ุจุง ุงุณุชูุงุฏู ุงุฒ ฺฉ ุงุณุชุฑุงุชฺ ฺูุฏูุงู ูพุฏุง ูโฺฉูุฏ.
    -   `minimax(...)`: ูพุงุฏูโุณุงุฒ ุงูฺฏูุฑุชู Minimax ุจุง ูุฑุณ ุขููุง-ุจุชุง ุจุฑุง ุฌุณุชุฌู ุจูุชุฑู ุญุฑฺฉุช ุฏุฑ ุฏุฑุฎุช ุจุงุฒ.
    -   `evaluateBoard(...)`: ฺฉ ุชุงุจุน ููุฑุณุชฺฉ ฺฉู ุจู ฺฉ ูุถุนุช ูุดุฎุต ุงุฒ ุตูุญู ุจุงุฒ ุงูุชุงุฒ ูโุฏูุฏ ุชุง `minimax` ุจุชูุงูุฏ ุจู ุญุฑฺฉุงุช ูุฎุชูู ุชุตููโฺฏุฑ ฺฉูุฏ.

---

##  cpp. ุชุญูู ูุงู ูพุงุฏูโุณุงุฒ (`ConnectFourGame.cpp`)

ุงู ูุงู ุจุณุงุฑ ุจุฒุฑฺฏ ุงุณุช ู ููุทู ฺฉุงูู ุจุงุฒ ุฏุฑ ุขู ูุฑุงุฑ ุฏุงุฑุฏ. ุฏุฑ ุงุฏุงููุ ุจุฎุดโูุง ฺฉูุฏ ุขู ุฑุง ุชุญูู ูโฺฉูู.

### ุญููู ุงุตู ุจุงุฒ (`run` method)

```cpp
void ConnectFourGame::run() {
    while (window.isOpen()) {
        handleEvents();
        update();
        render();
    }
}
```
ุงู ุณุงุฎุชุงุฑุ ฺฉ ุงูฺฏู ุงุณุชุงูุฏุงุฑุฏ ุฏุฑ ุจุงุฒโุณุงุฒ ุงุณุช. ุฏุฑ ูุฑ ูุฑู ุงุฒ ุจุงุฒุ ุจุฑูุงูู ุจู ุชุฑุชุจ ุฑูุฏุงุฏูุง ุฑุง ูพุฑุฏุงุฒุดุ ููุทู ุฑุง ุจูโุฑูุฒุฑุณุงู ู ุณูพุณ ุตูุญู ุฑุง ุฏูุจุงุฑู ุชุฑุณู ูโฺฉูุฏ.

### ูุฏุฑุช ุฑูุฏุงุฏูุง (`handleEvents` method)

```cpp
void ConnectFourGame::handleEvents() {
    sf::Event event;
    while (window.pollEvent(event)) {
        // ... (code to close window) ...

        switch (gameState) {
            case MAIN_MENU:    handleMainMenu(event); break;
            case PLAYER_SETUP: handlePlayerSetup(event); break;
            case PLAYING:      handlePlaying(event); break;
            // ... (game over handling) ...
        }
    }
}
```
ุงู ุชุงุจุน ุงุฒ ฺฉ `switch` ุจุฑ ุฑู `gameState` ุงุณุชูุงุฏู ูโฺฉูุฏ ุชุง ุฑูุฏุงุฏูุง ุฑุง ุจู ุชุงุจุน ููุงุณุจ ุงุฑุณุงู ฺฉูุฏ. ุจุฑุง ูุซุงูุ ุงฺฏุฑ ุจุงุฒ ุฏุฑ ููู ุงุตู ุจุงุดุฏุ ููุท `handleMainMenu` ูุฑุงุฎูุงู ูโุดูุฏ ู ฺฉูฺฉโูุง ููุณ ุฏุฑ ุตูุญู ุจุงุฒ ูุงุฏุฏู ฺฏุฑูุชู ูโุดููุฏ. ุงู ฺฉุงุฑ ุจู ุฌุฏุงุณุงุฒ ููุทู ุฏุฑ ูุถุนุชโูุง ูุฎุชูู ฺฉูฺฉ ูโฺฉูุฏ.

### ููุทู ููุด ูุตููุน (`findBestMove`, `minimax`, `evaluateBoard`)

ุงู ุจุฎุดุ ูพฺุฏูโุชุฑู ูุณูุช ุจุฑูุงูู ุงุณุช.

1.  **`findBestMove()`**: ุงู ุชุงุจุน ุงุณุชุฑุงุชฺ ููุด ูุตููุน ุฑุง ุชุนู ูโฺฉูุฏ:
    a.  **ุญุฑฺฉุช ุจุฑูุฏู:** ุขุง ฺฉุงููพูุชุฑ ูโุชูุงูุฏ ุฏุฑ ุงู ููุจุช ุจุฑูุฏู ุดูุฏุ ุงฺฏุฑ ุจููุ ุขู ุญุฑฺฉุช ุฑุง ุงูุฌุงู ุจุฏู.
    b.  **ูุณุฏูุฏ ฺฉุฑุฏู ุญุฑู:** ุขุง ุญุฑู ุฏุฑ ููุจุช ุจุนุฏ ุฎูุฏ ุจุฑูุฏู ูโุดูุฏุ ุงฺฏุฑ ุจููุ ุฌูู ุงู ุฑุง ุจฺฏุฑ.
    c.  **ุงุณุชูุงุฏู ุงุฒ `minimax`:** ุฏุฑ ุบุฑ ุงู ุตูุฑุชุ ุงุฒ ุงูฺฏูุฑุชู `minimax` ุจุฑุง ุงูุชู ุจูุชุฑู ุญุฑฺฉุช ุงุณุชุฑุงุชฺฺฉ ุงุณุชูุงุฏู ฺฉู.

2.  **`minimax(board, depth, alpha, beta, maximizingPlayer)`**:
    -   ุงู ฺฉ ุชุงุจุน ุจุงุฒฺฏุดุช ุงุณุช ฺฉู ุฏุฑุฎุช ุชุตููุงุช ุจุงุฒ ุฑุง ุชุง ุนูู `MAX_DEPTH` ุฌุณุชุฌู ูโฺฉูุฏ.
    -   `maximizingPlayer` ูุดุฎุต ูโฺฉูุฏ ฺฉู ุขุง ููุจุช ฺฉุงููพูุชุฑ ุงุณุช (ฺฉู ูโุฎูุงูุฏ ุงูุชุงุฒ ุฑุง ุจุดูู ฺฉูุฏ) ุง ููุจุช ุจุงุฒฺฉู (ฺฉู ูโุฎูุงูุฏ ุงูุชุงุฒ ุฑุง ฺฉููู ฺฉูุฏ).
    -   **ูุฑุณ ุขููุง-ุจุชุง (`alpha-beta pruning`)**: `alpha` ู `beta` ุฏู ูุชุบุฑ ูุณุชูุฏ ฺฉู ุจุฑุง ุจูููโุณุงุฒ ุงูฺฏูุฑุชู ุงุณุชูุงุฏู ูโุดููุฏ. ุงฺฏุฑ ุงูฺฏูุฑุชู ุชุดุฎุต ุฏูุฏ ฺฉู ฺฉ ุดุงุฎู ุงุฒ ุฏุฑุฎุช ุจุงุฒ ูุทุนุงู ุจู ฺฉ ูุชุฌู ุจุฏุชุฑ ุงุฒ ูุชุฌูโุง ฺฉู ูุจูุงู ูพุฏุง ุดุฏู ููุฌุฑ ูโุดูุฏุ ุขู ุดุงุฎู ุฑุง ุจู ุทูุฑ ฺฉุงูู ูุงุฏุฏู ูโฺฏุฑุฏ (`if (beta <= alpha) break;`). ุงู ุจูููโุณุงุฒ ุณุฑุนุช ุฌุณุชุฌู ุฑุง ุจู ุดุฏุช ุงูุฒุงุด ูโุฏูุฏ.

3.  **`evaluateBoard(board)`**:
    -   ุงู ุชุงุจุน ููุจ ุชุตููโฺฏุฑ `minimax` ุงุณุช. ุจู ฺฉ ูุถุนุช ุงุฒ ุตูุญู ุจุงุฒ ฺฉ ุงูุชุงุฒ ุนุฏุฏ ุงุฎุชุตุงุต ูโุฏูุฏ.
    -   ุงูุชุงุฒุฏู ุจู ุงู ุตูุฑุช ุงุณุช:
        -   ุจุฑุฏ ฺฉุงููพูุชุฑ: ุงูุชุงุฒ ุจุณุงุฑ ุจุงูุง (`+100000`).
        -   ุจุงุฎุช ฺฉุงููพูุชุฑ: ุงูุชุงุฒ ุจุณุงุฑ ูพุงู (`-100000`).
        -   ุชุนุฏุงุฏ ุฑุฏูโูุง ุณูโุชุง ฺฉุงููพูุชุฑ: ุงูุชุงุฒ ูุซุจุช (`+100`).
        -   ุชุนุฏุงุฏ ุฑุฏูโูุง ุฏูุชุง ฺฉุงููพูุชุฑ: ุงูุชุงุฒ ูุซุจุช (`+10`).
        -   ุชุนุฏุงุฏ ุฑุฏูโูุง ุณูโุชุง ู ุฏูุชุง ุญุฑู: ุงูุชุงุฒ ููู.
    -   `minimax` ุณุน ูโฺฉูุฏ ุจู ูุถุนุช ุจุฑุณุฏ ฺฉู ุงู ุงูุชุงุฒ ุฑุง ุจุฑุง ฺฉุงููพูุชุฑ ุจู ุญุฏุงฺฉุซุฑ ุจุฑุณุงูุฏ.

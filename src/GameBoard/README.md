# ูุณุชูุฏุงุช ฺฉูุงุณ `GameBoard`

ุงู ูุณุชูุฏ ุจู ุจุฑุฑุณ ุฏูู ฺฉูุงุณ `GameBoard`ุ ฺฉู ูุณุฆููุช ูุฏุฑุช ฺฉุงูู ุตูุญู ุจุงุฒ ุฑุง ุจุฑ ุนูุฏู ุฏุงุฑุฏุ ูโูพุฑุฏุงุฒุฏ.

## ๐ ููุง ฺฉู

ฺฉูุงุณ `GameBoard` ูุณุชู ูุฑฺฉุฒ ูุถุนุช ุจุงุฒ ุฑุง ุชุดฺฉู ูโุฏูุฏ. ุงู ฺฉูุงุณ ฺฉ ููุงุด ุฏุงุฎู ุงุฒ ุตูุญู ุจุงุฒ `6x7` ุฑุง ูุฏุฑุช ูโฺฉูุฏ ู ุชูุงุจุน ุจุฑุง ุชุนุงูู ุจุง ุงู ุตูุญู ูุฑุงูู ูโฺฉูุฏุ ูุงููุฏ ูุฑุงุฑ ุฏุงุฏู ฺฉ ููุฑู ุฌุฏุฏุ ุจุฑุฑุณ ุงุนุชุจุงุฑ ฺฉ ุญุฑฺฉุชุ ู ุดูุงุฑุด ุชุนุฏุงุฏ ุฑุฏูโูุง ฺูุงุฑุชุง.

## ๐ ุณุงุฎุชุงุฑ ูุงู

ฺฉูุงุณ `GameBoard` ุฏุฑ ุฏู ูุงู ูุฌุฒุง ูพุงุฏูโุณุงุฒ ุดุฏู ุงุณุช:

-   `GameBoard.h`: **ูุงู ูุฏุฑ (Header File)** ฺฉู ุชุนุฑู ู ุณุงุฎุชุงุฑ ฺฉูุงุณ `GameBoard` ุฑุง ุดุงูู ูโุดูุฏ.
-   `GameBoard.cpp`: **ูุงู ูพุงุฏูโุณุงุฒ (Implementation File)** ฺฉู ููุทู ูุชุฏูุง ุชุนุฑูโุดุฏู ุฏุฑ ูุฏุฑ ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ.

---

## ๐ ุชุญูู ูุงู ูุฏุฑ (`GameBoard.h`)

ูุงู ูุฏุฑ `GameBoard.h` ุฑุงุจุท ุนููู ฺฉูุงุณ ุฑุง ูุดุฎุต ูโฺฉูุฏ ู ุจู ุณุงุฑ ุจุฎุดโูุง ุจุฑูุงูู ุงุฌุงุฒู ูโุฏูุฏ ุชุง ุจุง ุตูุญู ุจุงุฒ ุชุนุงูู ุฏุงุดุชู ุจุงุดูุฏ.

```cpp
#pragma once

#include "../Constants.h"

class GameBoard {
public:
    // The game board grid. Kept public to allow direct access from game logic
    // and AI, mirroring the original design.
    char board[ROWS][COLS];

    // Constructor
    GameBoard();

    void reset();
    bool isValidMove(int col) const;
    bool makeMove(int col, char playerId);
    bool isFull() const;
    int countFours(char playerId) const;
    char getCell(int row, int col) const;

private:
    // Helper function to check for four-in-a-row in a specific direction
    bool checkDirection(int row, int col, int rowDir, int colDir, char playerId) const;
};
```

### ุจุฎุดโูุง ููู ฺฉุฏ `GameBoard.h`:

-   **`#include "../Constants.h"`**: ุงู ูุงู ุดุงูู ุซุงุจุชโูุง ุณุฑุงุณุฑ ูพุฑูฺู ูุงููุฏ `ROWS` ู `COLS` ุงุณุช ฺฉู ุงุจุนุงุฏ ุตูุญู ุจุงุฒ ุฑุง ุชุนู ูโฺฉููุฏ.
-   **`char board[ROWS][COLS]`**: ุงู ฺฉ ุขุฑุงู ุฏู ุจุนุฏ ุงุฒ ฺฉุงุฑุงฺฉุชุฑูุง ุงุณุช ฺฉู ูุถุนุช ูุฑ ุฎุงูู ุงุฒ ุตูุญู ุจุงุฒ ุฑุง ุฐุฎุฑู ูโฺฉูุฏ. ููุฏุงุฑ `'*'` ูุดุงูโุฏููุฏู ฺฉ ุฎุงูู ุฎุงู ุงุณุชุ ุฏุฑ ุญุงู ฺฉู `'X'` ุง `'O'` ูุดุงูโุฏููุฏู ููุฑู ุจุงุฒฺฉูุงู ุงุณุช. ุงู ูุชุบุฑ ุจู ุตูุฑุช `public` ุชุนุฑู ุดุฏู ุชุง ููุทู ููุด ูุตููุน ุจุชูุงูุฏ ุจู ุฑุงุญุช ุจู ุขู ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ ู ฺฉูพโูุง ุงุฒ ุขู ุจุฑุง ุชุญูู ุญุฑฺฉุงุช ุงุฌุงุฏ ฺฉูุฏ.
-   **ูุชุฏูุง ุนููู (`public` methods)**:
    -   `GameBoard()`: ุณุงุฒูุฏูโุง ฺฉู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูุชุฏ `reset()` ุฑุง ุจุฑุง ุขูุงุฏูโุณุงุฒ ุตูุญู ุจุงุฒ ูุฑุงุฎูุงู ูโฺฉูุฏ.
    -   `reset()`: ุชูุงู ุฎุงููโูุง ุตูุญู ุฑุง ุจู ุญุงูุช ุฎุงู (`'*'`) ุจุฑูโฺฏุฑุฏุงูุฏ.
    -   `isValidMove(col)`: ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ูโุชูุงู ุฏุฑ ุณุชูู `col` ฺฉ ููุฑู ุฌุฏุฏ ูุฑุงุฑ ุฏุงุฏ.
    -   `makeMove(col, playerId)`: ููุฑู ุจุงุฒฺฉู `playerId` ุฑุง ุฏุฑ ูพุงูโุชุฑู ุฎุงูู ุฎุงู ุณุชูู `col` ูุฑุงุฑ ูโุฏูุฏ.
    -   `isFull()`: ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ุตูุญู ุจุงุฒ ฺฉุงููุงู ูพุฑ ุดุฏู ุงุณุช ุง ุฎุฑ.
    -   `countFours(playerId)`: **ูููโุชุฑู ุชุงุจุน ููุทู ุจุงุฒ.** ุงู ุชุงุจุน ุชุนุฏุงุฏ ฺฉู ุฑุฏูโูุง ฺูุงุฑุชุง (ุงููุ ุนููุฏ ู ููุฑุจ) ุฑุง ฺฉู ุชูุณุท ุจุงุฒฺฉู `playerId` ุงุฌุงุฏ ุดุฏูุ ูุญุงุณุจู ูโฺฉูุฏ.
    -   `getCell(row, col)`: ููุฏุงุฑ ุฎุงูู ูุดุฎุตโุดุฏู ุชูุณุท `row` ู `col` ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
-   **ูุชุฏ ุฎุตูุต (`private` method)**:
    -   `checkDirection(...)`: ฺฉ ุชุงุจุน ฺฉูฺฉ ฺฉู ุชูุณุท `countFours` ุงุณุชูุงุฏู ูโุดูุฏ ุชุง ูุฌูุฏ ฺฉ ุฑุฏู ฺูุงุฑุชุง ุงุฒ ฺฉ ุฎุงูู ูุดุฎุต ู ุฏุฑ ฺฉ ุฌูุช ูุดุฎุต ุฑุง ุจุฑุฑุณ ฺฉูุฏ.

---

##  cpp. ุชุญูู ูุงู ูพุงุฏูโุณุงุฒ (`GameBoard.cpp`)

ุงู ูุงู ุฌุฒุฆุงุช ูพุงุฏูโุณุงุฒ ููุทู ุจุงุฒ ุฑุง ุฏุฑ ุจุฑ ูโฺฏุฑุฏ.

```cpp
#include "GameBoard.h"

// ... (implementations of constructor, reset, isValidMove, makeMove, isFull) ...

int GameBoard::countFours(char playerId) const {
    int count = 0;
    // Iterate through each cell as a potential start of a four-in-a-row
    for (int row = 0; row < ROWS; row++) {
        for (int col = 0; col < COLS; col++) {
            // Check all four directions from each cell
            if (checkDirection(row, col, 0, 1, playerId)) count++;  // Horizontal
            if (checkDirection(row, col, 1, 0, playerId)) count++;  // Vertical
            if (checkDirection(row, col, 1, 1, playerId)) count++;  // Diagonal (down-right)
            if (checkDirection(row, col, 1, -1, playerId)) count++; // Diagonal (down-left)
        }
    }
    return count;
}

// ... (implementation of getCell) ...

bool GameBoard::checkDirection(int row, int col, int rowDir, int colDir, char playerId) const {
    for (int i = 0; i < 4; i++) {
        int r = row + i * rowDir;
        int c = col + i * colDir;
        // Check if the cell is within bounds and belongs to the player
        if (r < 0 || r >= ROWS || c < 0 || c >= COLS || board[r][c] != playerId) {
            return false;
        }
    }
    return true;
}
```

### ุจุฎุดโูุง ููู ฺฉุฏ `GameBoard.cpp`:

-   **`makeMove(col, playerId)`**: ุงู ุชุงุจุน ููุทู ุงุตู "ุงูุชุงุฏู" ููุฑู ุฑุง ูพุงุฏูโุณุงุฒ ูโฺฉูุฏ. ุจุง ฺฉ ุญููู `for` ุงุฒ ูพุงูโุชุฑู ุฑุฏู (`ROWS - 1`) ุจู ุณูุช ุจุงูุง ุญุฑฺฉุช ูโฺฉูุฏ ู ุงููู ุฎุงูู ุฎุงู (`'*'`) ุฑุง ุจุง ุดูุงุณู ุจุงุฒฺฉู ูพุฑ ูโฺฉูุฏ.

-   **`countFours(playerId)`**: ุงู ุชุงุจุน ููุจ ุณุณุชู ุงูุชุงุฒุฏู ุจุงุฒ ุงุณุช.
    -   ุงู ุชุงุจุน ุจู ุฌุง ุงูฺฉู ููุท ฺฉ ุจุฑุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏุ **ุชูุงู** ุชุฑฺฉุจโูุง ฺูุงุฑุชุง ููฺฉู ุจุฑุง ฺฉ ุจุงุฒฺฉู ุฑุง ูโุดูุงุฑุฏ.
    -   ุจุง ุฏู ุญููู `for` ุชู ุฏุฑ ุชูุ ุงุฒ ูุฑ ุฎุงูู (`board[row][col]`) ุจู ุนููุงู ููุทู ุดุฑูุน ุจุงูููู ุจุฑุง ฺฉ ุฑุฏู ฺูุงุฑุชุง ุงุณุชูุงุฏู ูโฺฉูุฏ.
    -   ุงุฒ ูุฑ ุฎุงููุ ุชุงุจุน ฺฉูฺฉ `checkDirection` ุฑุง ุฏุฑ ฺูุงุฑ ุฌูุช ุงุตู (ุงููุ ุนููุฏุ ู ุฏู ุฌูุช ููุฑุจ) ูุฑุงุฎูุงู ูโฺฉูุฏ.
    -   ูุฑ ุจุงุฑ ฺฉู `checkDirection` ููุฏุงุฑ `true` ุจุฑฺฏุฑุฏุงูุฏุ ุดูุงุฑูุฏู `count` ฺฉ ูุงุญุฏ ุงูุฒุงุด ูโุงุจุฏ.

-   **`checkDirection(...)`**: ุงู ุชุงุจุน ฺฉ ููุทู ุณุงุฏู ุงูุง ูุฏุฑุชููุฏ ุฏุงุฑุฏ.
    -   ฺฉ ุญููู `for` ฺูุงุฑ ุจุงุฑ ุชฺฉุฑุงุฑ ูโุดูุฏ ุชุง ฺูุงุฑ ุฎุงูู ูุชูุงู ุฑุง ุจุฑุฑุณ ฺฉูุฏ.
    -   ุฏุฑ ูุฑ ุชฺฉุฑุงุฑุ ุจุง ุงุณุชูุงุฏู ุงุฒ ูพุงุฑุงูุชุฑูุง `rowDir` ู `colDir` (ฺฉู ูโุชูุงููุฏ `0`, `1` ุง `-1` ุจุงุดูุฏ)ุ ุจู ุฎุงูู ุจุนุฏ ุฏุฑ ุฌูุช ูุดุฎุต ุดุฏู ุญุฑฺฉุช ูโฺฉูุฏ.
    -   ุงฺฏุฑ ุฏุฑ ูุฑ ูุฑุญููุ ุฎุงููโุง ุฎุงุฑุฌ ุงุฒ ูุญุฏูุฏู ุตูุญู ุจุงุดุฏ ุง ุจู ุจุงุฒฺฉู ููุฑุฏ ูุธุฑ ุชุนูู ูุฏุงุดุชู ุจุงุดุฏุ ุชุงุจุน ุจูุงูุงุตูู `false` ุจุฑูโฺฏุฑุฏุงูุฏ.
    -   ุงฺฏุฑ ุญููู ุจุง ููููุช ุจู ูพุงุงู ุจุฑุณุฏุ ุจู ุงู ูุนู ุงุณุช ฺฉู ฺฉ ุฑุฏู ฺูุงุฑุชุง ูุนุชุจุฑ ูพุฏุง ุดุฏู ู ุชุงุจุน `true` ุจุฑูโฺฏุฑุฏุงูุฏ.
